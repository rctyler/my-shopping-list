(function(localStorage){window._my=window._my||{};window._my.storage=window._my.storage||function(){function getShoppingList(){return JSON.parse(localStorage.getItem("shoppinglist"))||[]}function saveShoppingList(list){localStorage.setItem("shoppinglist",JSON.stringify(list))}return{getShoppingList:getShoppingList,saveShoppingList:saveShoppingList}}()})(localStorage);(function(window,document){window._my=window._my||{};window._my.shoppingItem=window._my.shoppingItem||function(){var storage=window._my.storage;function add(itemName){var removeBtn=document.createElement("button");removeBtn.setAttribute("id","remove-"+itemName);removeBtn.addEventListener("click",remove);removeBtn.textContent="Remove";return removeBtn}function remove(evt){var listItems=storage.getShoppingList();var shoppingList=evt.srcElement.parentElement.parentElement;var item=evt.srcElement.parentElement;shoppingList.removeChild(item);var index=listItems.indexOf(evt.srcElement.id.split("remove-")[1].toLowerCase());listItems.splice(index,1);storage.saveShoppingList(listItems)}return{add:add,remove:remove}}()})(window,document);(function(window,document){window._my=window._my||{};window._my.shoppingCart=window._my.shoppingCart||function(){var shoppingItem=window._my.shoppingItem;var list=document.querySelector("#shopping-list");var itemInput=document.querySelector("#shopping-item");var storage=window._my.storage;function init(){storage.getShoppingList().forEach(function(itm){return list.appendChild(_newShoppingItem(itm))})}function add(){var listItems=storage.getShoppingList();var hasItem=listItems.map(function(x){return x.toLowerCase()}).includes(itemInput.value.toLowerCase());if(hasItem){return}list.appendChild(_newShoppingItem(itemInput.value));listItems.push(itemInput.value);storage.saveShoppingList(listItems);itemInput.focus();_resetInput()}function _resetInput(){itemInput.value=""}function _newShoppingItem(name){var newShoppingItem=document.createElement("li");newShoppingItem.appendChild(document.createTextNode(name));newShoppingItem.appendChild(shoppingItem.add(name.toLowerCase()));return newShoppingItem}return{init:init,add:add}}()})(window,document);window._my.shoppingCart.init();